defmodule RetoElixir.Domain.UseCase.SignUp.SignupUseCase do
  alias RetoElixir.Domain.Model.Signup.Model.User
  alias RetoElixir.Infrastructure.DrivenAdapters.Memory.ConsumerWriteGateway

  def execute(params, ctx) do
    with {:ok, user} <- User.validate(params),
         {:ok, _stored_user} <- ConsumerWriteGateway.save_user(user, ctx) do
      {:ok, :created}
    else
      error -> error
    end
  end
end
